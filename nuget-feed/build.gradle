plugins {
    id 'com.github.rodm.teamcity-server' version '1.4.1'
}

teamcity {
    version = teamcityVersion
}

ext {
    olingoVersion = '2.0.10'
}

configurations.implementation {
    exclude group: "javax.ws.rs" // bundling of this dependency causes https://youtrack.jetbrains.com/issue/TW-78779
    exclude group: "com.google.code.gson" // Gson 2.9 is bundled with TeamCity
}

dependencies {
    compile 'org.core4j:core4j:0.5'
    compile 'org.odata4j:odata4j-core:0.8.0-SNAPSHOT'
    compile 'org.odata4j:odata4j-jersey:0.8.0-SNAPSHOT'
    compile 'com.sun.jersey:jersey-client:1.11'
    compile 'com.sun.jersey:jersey-core:1.11'
    compile 'com.sun.jersey:jersey-server:1.11'
    compile 'com.sun.jersey:jersey-servlet:1.11'
    compile "org.apache.olingo:olingo-odata2-api:$olingoVersion"
    compile "org.apache.olingo:olingo-odata2-api-annotation:$olingoVersion"
    compile "org.apache.olingo:olingo-odata2-core:$olingoVersion"
    compile "org.jetbrains.kotlin:kotlin-stdlib-jdk8"
    provided project(':nuget-common')
    provided project(':nuget-server-common')
    provided files("${teamcityDir}/webapps/ROOT/WEB-INF/lib/common-api.jar")
    provided files("${teamcityDir}/webapps/ROOT/WEB-INF/lib/common-impl.jar")
    provided files("${teamcityDir}/webapps/ROOT/WEB-INF/lib/server-api.jar")
    provided files("${teamcityDir}/webapps/ROOT/WEB-INF/lib/nuget-utils.jar")
    provided files("${teamcityDir}/webapps/ROOT/WEB-INF/lib/joda-time.jar")
    provided files("${teamcityDir}/webapps/ROOT/WEB-INF/lib/web.jar")
    provided "org.jetbrains.teamcity.internal:server:$teamcityVersion"
    provided "com.github.ben-manes.caffeine:caffeine:2.4.0"
}
